const { pathsToModuleNameMapper } = require('ts-jest');
const { compilerOptions } = require('./tsconfig.json');

module.exports = {
  testEnvironment: 'jsdom',
  moduleFileExtensions: ['js', 'jsx', 'ts', 'tsx', 'json', 'node'],
  testMatch: [
    '**/__tests__/**/*.[jt]s?(x)',
    '**/?(*.)+(spec|test).[tj]s?(x)',
  ],
  moduleNameMapper: {
    ...pathsToModuleNameMapper(compilerOptions.paths, { prefix: '<rootDir>/' }),
    '\\.(css|less|scss|sass)$': 'identity-obj-proxy',
    '^@/(.*)$': '<rootDir>/app/src/$1',
  },
  transform: {
    '^.+\\.(ts|tsx)$': 'ts-jest',
    '^.+\\.(js|jsx)$': 'babel-jest',
    '^.+\\.(css|scss|sass|less)$': 'jest-transform-stub',
    '^.+\\.(jpg|jpeg|png|gif|webp|svg)$': 'jest-transform-stub',
  },
  setupFilesAfterEnv: ['<rootDir>/test/setupTests.ts'],
  collectCoverage: true,
  collectCoverageFrom: [
    'app/src/**/*.{ts,tsx,js,jsx}',
    '!app/src/**/*.d.ts',
    '!app/src/**/*.stories.{ts,tsx,js,jsx}',
    '!app/src/**/*.test.{ts,tsx,js,jsx}',
    '!app/src/**/index.ts',
    '!app/src/**/types.ts',
    '!app/src/**/constants.ts',
    '!app/src/**/styles.ts',
    '!app/src/**/theme.ts',
    '!app/src/**/mocks/**',
    '!app/src/**/__fixtures__/**',
    '!app/src/**/__mocks__/**',
    '!app/src/**/__tests__/**',
  ],
  coverageDirectory: 'coverage',
  coveragePathIgnorePatterns: [
    '/node_modules/','/dist/','/build/','/coverage/','/.github/','/.vscode/','/.idea/','/.cache/','/.next/','/out/','/public/','/test/','/scripts/','/types/',
  ],
  coverageReporters: ['text', 'lcov', 'clover', 'html', 'json'],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },
  modulePaths: ['<rootDir>/app/src'],
  testPathIgnorePatterns: [
    '/node_modules/','/dist/','/build/','/coverage/','/.github/','/.vscode/','/.idea/','/.cache/','/.next/','/out/','/public/','/test/','/scripts/','/types/',
  ],
  watchPlugins: [
    'jest-watch-typeahead/filename',
    'jest-watch-typeahead/testname',
  ],
  testTimeout: 30000,
  clearMocks: true,
  resetModules: true,
  resetMocks: true,
  restoreMocks: true,
  testEnvironmentOptions: {
    url: 'http://localhost:3000',
  },
  transformIgnorePatterns: [
    '/node_modules/(?!(axios|@solana|@project-serum|@solana-labs|@solana/wallet-adapter|@solana/spl-token|@solana/spl-token-registry|@solana/spl-token-swap|@solana/stake-program|@solana/stake-account|@solana/stake-pool|@solana/web3.js|@solana/buffer-layout|@solana/buffer-layout-utils|@solana/codecs|@solana/errors|@solana/instructions|@solana/keys|@solana/program|@solana/rpc|@solana/rpc-api|@solana/rpc-spec|@solana/rpc-spec-types|@solana/rpc-subscriptions|@solana/rpc-subscriptions-spec|@solana/rpc-subscriptions-types|@solana/rpc-transport|@solana/rpc-transport-http|@solana/rpc-transport-websocket|@solana/rpc-transport-types|@solana/rpc-types|@solana/rpc-utils|@solana/signers|@solana/spl-token|@solana/spl-token-registry|@solana/spl-token-swap|@solana/stake-program|@solana/stake-account|@solana/stake-pool|@solana/transactions|@solana/transaction|@solana/transaction-confirmation|@solana/transaction-messages|@solana/transaction-version|@solana/transaction-version-types|@solana/transaction-version-utils|@solana/transaction-version-utils-types|@solana/transaction-version-utils-spec|@solana/transaction-version-utils-spec-types|@solana/transaction-version-utils-spec-errors|@solana/transaction-version-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-types|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils|@solana/transaction-version-utils-spec-errors-utils-spec-errors-utils-spec-errors-utils-spec-errors-))',
  ],
};
